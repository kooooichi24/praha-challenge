<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CORS Test</title>
    <style>
      body {
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <h1>CORS Test</h1>
    <button id="request">リクエストを送信</button>
    <p>結果</p>
    <pre id="result"></pre>
    <script>
      const resultElement = document.getElementById("result")
      const requestButton = document.getElementById("request")

      const sendRequest = async () => {
        resultElement.innerText = "pendiing..."

        try {
          const response = await fetch("<%= apiURL %>", {
            method: "POST",
            headers: {
              "Content-Type":
                "application/x-www-form-urlencoded; charset=utf-8",
              "X-Test": "hello",
              Origin: "http://localhost:8000",
            },
            body: "hoge=foooo",
          })
          const result = await response.json()

          resultElement.innerText = JSON.stringify(result, undefined, 2)
        } catch (error) {
          console.dir(error)
          resultElement.innerText = JSON.stringify(error, undefined, 2)
        }
      }

      requestButton.addEventListener("click", sendRequest)
    </script>
  </body>
</html>
